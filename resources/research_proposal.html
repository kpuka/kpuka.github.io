<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Developing a Research Proposal – Klajdi Puka, PhD</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-a8a9bdd4a348b8a9c1dbb1e579a63077.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QN2NZN1QS3"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QN2NZN1QS3', { 'anonymize_ip': true});
</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Klajdi Puka, PhD</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../consulting.html"> 
<span class="menu-text">Consulting Services</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cv.html"> 
<span class="menu-text">CV/Resume</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../resources/data_formatting.html">Getting Started</a></li><li class="breadcrumb-item"><a href="../resources/research_proposal.html">Research Proposal</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/data_formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/research_proposal.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Research Proposal</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/sample_size_calculator.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sample Size Calculator</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/r_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/quarto_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Quarto</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Clinical Trials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/rct_design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Study Design</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/rct_randomization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Randomization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/rct_other.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other Considerators</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Other Study Designs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/study_case_control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Case Control</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/study_chart_review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chart Review</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/study_pilot_studies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Pilot Studies</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/study_case_reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Case Reports</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/study_systematic_reviews.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Systematic Reviews</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Regressions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/regression_linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/regression_logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logistic Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/regression_survival.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Survival Analyses</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/regression_multilevel.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multilevel Models</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Other Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/stat_clin_significance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical vs Clicical Significance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/confounding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Confounding</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/categorical_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Categorical Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/inter_rater_reliability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inter-rater Reliability</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Survey Design</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/surveys_invitation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Invitation and Follow-up</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../resources/surveys_questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Designing Effective Questions</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#part-1-objectives-and-aims" id="toc-part-1-objectives-and-aims" class="nav-link active" data-scroll-target="#part-1-objectives-and-aims">Part 1: Objectives and Aims</a>
  <ul class="collapse">
  <li><a href="#purpose-of-research-proposal" id="toc-purpose-of-research-proposal" class="nav-link" data-scroll-target="#purpose-of-research-proposal">Purpose of Research Proposal</a></li>
  <li><a href="#how-should-the-proposal-be-structured" id="toc-how-should-the-proposal-be-structured" class="nav-link" data-scroll-target="#how-should-the-proposal-be-structured">How Should the Proposal be Structured?</a></li>
  <li><a href="#summary-and-specific-aims-section" id="toc-summary-and-specific-aims-section" class="nav-link" data-scroll-target="#summary-and-specific-aims-section">Summary and Specific Aims Section</a></li>
  <li><a href="#example-of-the-objectivesspecific-aims" id="toc-example-of-the-objectivesspecific-aims" class="nav-link" data-scroll-target="#example-of-the-objectivesspecific-aims">Example of the Objectives/Specific Aims</a></li>
  </ul></li>
  <li><a href="#part-2-writing-an-analysis-plan" id="toc-part-2-writing-an-analysis-plan" class="nav-link" data-scroll-target="#part-2-writing-an-analysis-plan">Part 2: Writing an Analysis Plan</a>
  <ul class="collapse">
  <li><a href="#purpose-of-the-analysis-plan" id="toc-purpose-of-the-analysis-plan" class="nav-link" data-scroll-target="#purpose-of-the-analysis-plan">Purpose of the Analysis Plan</a></li>
  <li><a href="#getting-started-specific-aims-and-methods" id="toc-getting-started-specific-aims-and-methods" class="nav-link" data-scroll-target="#getting-started-specific-aims-and-methods">Getting Started: Specific Aims and Methods</a></li>
  <li><a href="#writing-the-analysis-plan" id="toc-writing-the-analysis-plan" class="nav-link" data-scroll-target="#writing-the-analysis-plan">Writing the Analysis Plan</a></li>
  <li><a href="#examples-of-analysis-plans" id="toc-examples-of-analysis-plans" class="nav-link" data-scroll-target="#examples-of-analysis-plans">Examples of Analysis Plans</a></li>
  </ul></li>
  <li><a href="#references-and-further-readings" id="toc-references-and-further-readings" class="nav-link" data-scroll-target="#references-and-further-readings">References and Further Readings</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../resources/data_formatting.html">Getting Started</a></li><li class="breadcrumb-item"><a href="../resources/research_proposal.html">Research Proposal</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Developing a Research Proposal</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Topic: Review of how research proposal should be structured, primarily focusing on the objectives/aims and analyses plan sections.</p>
<section id="part-1-objectives-and-aims" class="level1">
<h1>Part 1: Objectives and Aims</h1>
<section id="purpose-of-research-proposal" class="level2">
<h2 class="anchored" data-anchor-id="purpose-of-research-proposal">Purpose of Research Proposal</h2>
<p>The goal of the grant proposal is to present a coherent, and carefully thought-out plan for a project that will address an important need that aligns with the funding agency’s priorities. The proposal will be evaluated by scientific reviewers who should gain a clear understanding of the importance of the project, your plan for addressing the problem, and why you/your team are best equipped to successfully undertake the project.</p>
<p>It is important to remember that the reviewer’s specialty may differ from that of the research topic, and that reviewers will not fund a study they do not understand. Therefore, the research proposal should be understandable by a general scientific audience, and you should aim to make things as simple, explicit, and concrete as possible. The proposal should also be highly readable. Don’t make reviewers work to understand your project.</p>
<p>Consider the following general points to improve clarity and readability:</p>
<ul>
<li><p><strong>Leave nothing open to interpretation</strong>. Be direct and explicit in labeling the purpose of a sentence or section.</p>
<ul>
<li>Examples: ‘This project is innovative because…’;
<ul>
<li>‘The long-term goal of this project is…’</li>
<li>‘We are a multidisciplinary team spanning cardiologists, pathologists, epidemiologists and statisticians, with the expertise to undertake the proposed research because…’</li>
</ul></li>
</ul></li>
<li><p>Use bolded, underlined, or italicized text (in moderation) to highlight key phrases to make them easy to find. Phases such as “long-term goal”, “objective”, “specific aims”, “innovative”.</p></li>
<li><p>Be mindful of the visual appearance of the proposal and ensure that it is not overcrowded. White space and page or section breaks are important to consider.</p></li>
<li><p>Don’t use a lot of jargon or abbreviations (especially non-standard abbreviations); it is cognitive taxing to keep track of jargon or multiple abbreviations. Consider boding the first instance of an abbreviation to make it easier for reviewers to find and refer back to.</p></li>
<li><p>Avoid using clichés (e.g.&nbsp;state-of-the-art equipment) and colloquialisms - assume reviewers may not be primarily English speaking or from Canada.</p></li>
</ul>
<p>As much as possible use the language of the agency guidelines, where applicable, to reinforce how your project fits with their funding priorities. If the agency is calling for innovative projects describe your project as “innovative”, do not leave it to the reviewer to assume its innovative based on your scientific description of your project. Again, don’t make reviewers work for it.</p>
</section>
<section id="how-should-the-proposal-be-structured" class="level2">
<h2 class="anchored" data-anchor-id="how-should-the-proposal-be-structured">How Should the Proposal be Structured?</h2>
<p>First and foremost, always follow the guidelines and never exceed the space allotted.</p>
<p>Though writing styles and requirements from different agencies vary, an approach that is often recommended is to begin your grant proposal with a summary and the specific aims (the focus of this document), followed by a more detailed background section, the experimental design, measures, statistical analyses, and limitations and alternative plans.</p>
<p>The summary and specific aims section should serve as an abbreviated summary of the entire proposal and provide reviewers with a guide of what to expect from the rest of your proposal. The language and terminology used in the summary and specific aims sections should be used consistently throughout the proposal to maintain consistency. The <strong>specific aims section is the most important</strong> part of the proposal because all subsequent sections should always link back and support the specific aims. The structure of this section can follow a specific formula (described below).</p>
</section>
<section id="summary-and-specific-aims-section" class="level2">
<h2 class="anchored" data-anchor-id="summary-and-specific-aims-section">Summary and Specific Aims Section</h2>
<p>Requirements for each proposal will differ, but the section below provides a concrete example of how this section can be organized in four paragraphs:</p>
<p><strong>1) Introduction</strong> The goal of the introductory paragraph is to ensure reviewers understand: a) the current knowledge in the field, b) the gap that constitutes an important problem, and c) the importance of address this gap. Consider using the following structure:</p>
<ul>
<li><em>Attention grabber/the Hook</em>: Begin with an attention-grabbing sentence to establish the relevance of your proposal to human health. Be careful to not state information that would be intrinsically obvious to the reviewers. The sentence should compel the reader to read on.
<ul>
<li>Example: Although the majority of children with epilepsy achieve seizure control in the long-term, the cognitive, psychiatric, and psychosocial problems that are pervasive among 80% of children continue to persist.</li>
</ul></li>
<li><em>What is known</em>: This part aims to ensure that all reviewers have the required background knowledge to understand the problem, and sets up the knowledge gap or the unmet need that will be addressed.</li>
<li><em>Gap in knowledge</em>: Clearly state the gap that needs to be addressed and why it is important.
<ul>
<li>Examples: ‘What is not known is…’; ‘Thus there is an urgent need for …’; ‘This lack of knowledge represents an important problem because…’</li>
</ul></li>
<li><em>The Critical Need</em>: This is the knowledge, technique, or treatment your proposal will develop; the reason your proposal should be funded. Emphasize the significance of the problem and that your research is the next logical step. You should state why your project is a timely investment. Is there any urgency to solving this problem sooner rather than later? What’s the impact of not addressing this issue?</li>
</ul>
<p><strong>2) Goals / Objectives</strong> The goal of the second paragraph is to introduce the solution to the identified gap/need. Include the following in this section:</p>
<ul>
<li><p><em>Long-term Goal</em>: The overarching goal and continuum of research that you will pursue over the course of multiple grants. This goal should be broad enough to encompass the gap or need identified previously.</p>
<ul>
<li>Example: ‘Our long-term goal is to …’</li>
</ul></li>
<li><p>* <em>Objective</em>: Defines the purpose of the current grant application - what it seeks to accomplish, which should be to fill the gap/need identified previously. This should be focused on the product of the research (not the process) and should therefore be to either fill in the gap or meet a need. The objective should have a defined end point.</p>
<ul>
<li><p>It is not appropriate to state “to study X”. This is focused on the process (not the product) and there is no defined end point (i.e.&nbsp;when have you ‘studied’ a topic enough?)</p></li>
<li><p>Example: ‘The overall objective of this proposal, which is the next step toward attaining our long-term goal, is to .’</p></li>
</ul></li>
<li><p><em>Central Hypothesis</em>: This should link to the Objective, should be testable, and should provide a focus (i.e.&nbsp;it should give direction to the research; it should serve to set up the specific aims, discussed below). Briefly explain the rationale for the hypothesis in this section, and if needed, refer to a more detailed explanation elsewhere in the proposal. Avoid vague hypotheses because it will be unclear what you expect to determine with the proposed research.</p>
<ul>
<li>Example: ‘Our central hypothesis is that…’</li>
</ul></li>
</ul>
<p><strong>3) The Specific Aims</strong> The goal of the third paragraph is to describe the aims that will test the central hypotheses. There should be complete alignment between the Specific Aims and Central Hypothesis.</p>
<ul>
<li><p>Begin this section with an explicit sentence such as “<em>We plan to test our central hypothesis and accomplish the overall objective of this application by pursuing the following specific aims:</em>”</p></li>
<li><p>The aims should be related but should not be dependent on each other (e.g., Aim 2 should not rely on the success of Aim 1).</p></li>
<li><p>Each Aim should be in a separate line, numbered and indented, to improve readability.</p></li>
</ul>
<p><strong>4) Summary / Impact</strong> The goal of the fourth paragraph is to create a firm, broad base to support the proposal, and can include the following information.</p>
<ul>
<li><p><em>Innovation</em>: what makes your project innovative?</p></li>
<li><p><em>Expected outcomes</em>: Discuss the expected outcomes and why they are important. If this was discussed in the specific aims it may not need to be repeated here.</p></li>
<li><p><em>Study Team</em>: End this paragraph by indicating why you, your team, and your research environment are best positioned to accomplish this research. Keep it brief but emphasize that your team has the scope and breadth of experience necessary to successfully conduct the research. \</p></li>
<li><p><em>Impact</em>: Generalize the positive impacts that are anticipated from the expected outcomes. If applicable, this section should also speak to a) the jurisdictional context of the project and the impact/generalizability to other jurisdictions, and b) the potential cost-savings to the healthcare system, or other patient-, systems-, or societal-level benefits of the work. Addressing these points demonstrates you understand where your work is situated in the wider research setting.</p></li>
</ul>
<p>Again, each proposal will be unique, and a different organization may need to be utilized. Nonetheless, consider the information outlined above and consider including the elements discussed in your grant proposal.</p>
</section>
<section id="example-of-the-objectivesspecific-aims" class="level2">
<h2 class="anchored" data-anchor-id="example-of-the-objectivesspecific-aims">Example of the Objectives/Specific Aims</h2>
<p>Our <strong>long-term goal</strong> is to improve the quality of life of children with epilepsy. The <strong>objective</strong> of this pilot trial is to evaluate the feasibility of utilizing drug A and B as an intervention for children with epilepsy. Our <strong>central hypothesis</strong> is that drug A and B will be successfully implemented, and that drug A will be more effective at improving seizure frequency and health-related quality of life, relative to drug B for children with epilepsy. We plan to test our central hypothesis and accomplish the overall goal of this trial by pursuing the following <strong>specific aims</strong>:</p>
<p><strong>Primary Aim:</strong> 1. To assess the feasibility of successfully implementing drug A as an intervention for children with epilepsy. Specifically, we will evaluate a) study procedures (e.g.&nbsp;recruitment, attrition, time to complete study procedures), b) participant adherence to treatment</p>
<p>This information will be essential in preparing for a subsequent multi-centered trial across Canada. Feasibility outcomes will be evaluated throughout the course of the study and the specific outcomes collected and evaluated are presented in Section X.</p>
<p><strong>Secondary aims</strong> are to obtain preliminary data regarding the impact of drug A and B on: 1. Children’s frequency of seizures at 6-months follow-up. 2. Children’s health-related quality of life (HRQOL) at 6-months follow-up.</p>
<p>All secondary outcomes (efficacy outcomes) will be evaluated two weeks before the commencement of the drug and six months after commencement. The specific outcomes that will be collected and evaluated are presented in Section X.</p>
</section>
</section>
<section id="part-2-writing-an-analysis-plan" class="level1">
<h1>Part 2: Writing an Analysis Plan</h1>
<section id="purpose-of-the-analysis-plan" class="level2">
<h2 class="anchored" data-anchor-id="purpose-of-the-analysis-plan">Purpose of the Analysis Plan</h2>
<p>A detailed, clearly written statistical analysis plan is an essential part of any competitive research proposal and serves two key purposes, outlined below:</p>
<p><strong>1) Ensures Data Collected Can Answer the Question Proposed</strong> If the specific aims, study design and structure of the data (e.g.&nbsp;how the constructs of interest are operationalized and recorded) are not aligned to optimally support the analysis plan, the investigator may not be able to answer the research question of interest. Potential flaws in the study design or proposed data structure are easier to identify once the investigator have carefully developed an analysis plan and carefully considered what the data file and the results will look like.</p>
<p>It is not uncommon for a statistician to be first consulted when the data needs to be analyzed, only to find that the study deign and/or data collected cannot does not align with the research question and the analyses required. Therefore, it is strongly recommended that a statistician be involved in all aspects of the study, from conceptualization to knowledge translation. Challenges are best identified and addressed in the design stage of the study, rather than trying to solve problems at the analysis stage. Addressing a mismatch of what was intended versus what is possible with the data collected, is much more complicated (or not possible all together) at the analysis stage, once data has been collected.</p>
<p>Lastly, data collection is expensive, and one needs to know the value of each data point collected, and how it will be utilized to keep the burden on patients low, and to conduct the project efficiently.</p>
<p><strong>2) Demonstrates a Clear Plan to Reviewers</strong> The analyses plan section also highlights to reviewers that a coherent, and carefully thought-out research plan has been developed. A vague analysis plan will suggest to reviewers that there is no actual plan, connoting to reviewers that the applicant is proposing the “just trust me” approach, which may suggest some risk to the reviewers/agency and erode their confidence in timely project deliverables. Leaving the plan for analyzing the data until later is counter-intuitive since the value of any proposed study/experiment hinges on the results arising from proper analysis and interpretation.</p>
</section>
<section id="getting-started-specific-aims-and-methods" class="level2">
<h2 class="anchored" data-anchor-id="getting-started-specific-aims-and-methods">Getting Started: Specific Aims and Methods</h2>
<p>Before starting on the analysis plan, the specific aims, methods, and operationalization of variables should be developed and aligned, as described below:</p>
<ul>
<li>Ensure that each section of your proposal is inherently connected and builds on previous sections. Each specific aim should be detailed enough to have a clear method of being analyzed. Additionally, all subsequent sections, such as the methods, the outcomes and variables, and the analyses plans, should always link back to the specific aims.
<ul>
<li>One way to achieve this may be to label each specific aim (e.g.&nbsp;1, 2a, 2b, 3), and consistently refer to these labels throughout the analyses plan, e.g.&nbsp;“To evaluate Aim 1, ….”</li>
</ul></li>
<li>In the methods section, ensure that the outcome, exposure / predictor variable, and all co-variates evaluating theoretical constructs of interest are explicitly operationalized – i.e.&nbsp;clearly defined and described in terms of the data type and scale of measurement. <strong>Always think about what the data will look like in the spreadsheet/database and what these variables will be</strong>.
<ul>
<li>For example, you may be interested in ‘adverse events’, but how will this theoretical construct be measured, what will the data look like? This may be operationalized as a binary variable (e.g.&nbsp;yes vs.&nbsp;no) indicating whether the patient had at least one adverse event within X months after a procedure. Alternatively, it may be operationalized as a count variable indicating the number of adverse events that occurred within X months after a procedure.</li>
</ul></li>
<li>Theoretical constructs may be operationalized in many ways, so you must be explicit in how you will define and measure them. Remember to specify the time point that variables will be collected. Determining the operationalization of the constructs is the first step to generating the analysis plan.
<ul>
<li>The type of data collected and how variables are operationalized will determine the type of analyses your able to perform and will therefore dictate the type of research questions that can be answered.</li>
</ul></li>
</ul>
</section>
<section id="writing-the-analysis-plan" class="level2">
<h2 class="anchored" data-anchor-id="writing-the-analysis-plan">Writing the Analysis Plan</h2>
<p>Ensure that all analyses directly link to your specific aims and hypotheses. Consider the following points to ensure that the analysis plan has been described adequately and in unambiguous terms:</p>
<ul>
<li><p>Reviewers will check that the proposed analyses are appropriate and will adequately account for the study design, data structure (e.g.&nbsp;hierarchy, clustering, matching, paired data) and scale of measurement (e.g.&nbsp;binary, nominal, ordinal, continuous).</p></li>
<li><p>Reviewers will also check that the assumptions of the proposed methods hold, and you should indicate the planned analyses if assumptions do not hold. This exemplifies that the plan for handling the data is well thought out and you have a plan for everything.</p>
<ul>
<li>For example, you could indicate: <em>We plan to do a Poisson regression. The data will be checked for over dispersion via a deviance goodness of fit test. In the case where dispersion is present, a negative binomial model will be used.</em></li>
</ul></li>
<li><p>Explain statistical concepts in a clear, concise language that is accessible to:</p></li>
</ul>
<pre><code>-   Non-statisticians -- explaining the big picture and why more than a t-test is required

-   Statisticians -- using statistical terminology and specific statistical techniques</code></pre>
<ul>
<li><p>Utilizing statistical terminology and naming the specific statistical methods is appropriate and helpful. It will show that you and your team are knowledgeable and capable of doing the analyses.</p>
<ul>
<li>Reviewers should feel reassured that you have thought in some detail about how the data will be collected, measured and analyzed to address the study aims. However, <strong>it is important that you understand the terminology and use it appropriately</strong>; otherwise reviewer will lose confidence in your team’s ability to successfully carry out the project.</li>
</ul></li>
<li><p>Important confounding factors should be listed, and the method of adjustment specified.</p></li>
</ul>
<p>In planning the study and the analysis, it may be helpful to create mock tables and figures for the data you wish to ultimately present and work backwards to ensure that the data collection and analyses plan align with your goal.</p>
</section>
<section id="examples-of-analysis-plans" class="level2">
<h2 class="anchored" data-anchor-id="examples-of-analysis-plans">Examples of Analysis Plans</h2>
<ol type="1">
<li><p>Patient characteristics will be summarized using mean and standard deviation (for continuous variables) or frequency and proportions (for categorical variables). For the primary outcome (systolic blood pressure 90 days after intervention), multiple linear regression will be used to compare the two intervention groups (drug A vs.&nbsp;drug B), while adjusting for known confounders: patients’ age, sex, and body mass index at baseline. With respect to secondary and exploratory outcomes, the same methodology will be used for continuous variables, while binary outcomes will be evaluated using multivariable logistic regression adjusting for patients’ age, sex, and body mass index at baseline. Two-tailed tests will be used, and the level of significance will be set to 0.05.</p></li>
<li><p>Patient characteristics will be summarized using mean and standard deviation (for continuous variables) or frequency and proportions (for categorical variables). All patients enrolled in the study will be analyzed based on their randomization group, following the intention-to-treat principle. The primary end point, ability to walk unassisted for 10 meters at 30 days post intervention (yes vs.&nbsp;no), will be compared between the two groups (treatment vs.&nbsp;control) using simple logistic regression. Secondary outcomes of the two groups will be compared using simple linear regression (for continuous variables; e.g.&nbsp;body mass index, lean muscle mass), logistic regression (for binary outcomes; e.g.&nbsp;adverse event), Poisson regression (for count data, e.g.&nbsp;length of hospital stay), and log rank test (for time to event data; e.g.&nbsp;patient survival). For variables evaluated before and after randomization (e.g.&nbsp;lean muscle mass), the score at follow-up will be entered as the dependent variable, and treatment group and baseline score will be entered as a covariates. Two-tailed tests will be used, and the level of significance will be set to 0.05.</p></li>
<li><p>Patient characteristics will be summarized using mean and standard deviation (for continuous variables) or frequency and proportions (for categorical variables). Poisson regression with robust error variance (Zou, 2004) will be used to estimate the relative risk (RR) of sepsis among patients with diabetes compared to non-diabetic patients (Aim 1). Unadjusted estimates will be evaluated, as well as RR adjusted for age, sex, socio-economic status, comorbidities (COPD, cancer, congestive heart failure, coronary artery disease). Among patients with sepsis, we will estimate the odds of organ failure and mortality among those with and without diabetes (Aim 2) using unadjusted logistic regression. Multivariable logistic regression will also be used to adjust for age, sex, and comorbidities (COPD, cancer, congestive heart failure, coronary artery disease). Two-tailed tests will be used and the level of significance will be set to 0.05.</p></li>
<li><p>To evaluate study feasibility (Research Question 1), descriptive statistics will be used to determine the 1) number of participants screened and enrolled per month, 2) proportion of screened participants eligible who enroll, 3) reasons for non-participation, 4) retention rate in treatment and waitlist control condition, 5) missing data on questionnaires, 6) time to complete questionnaires, and 7) participant adherence (proportion of missed doses). To evaluate the impact of the intervention on the frequency of emergency department visits over the next 12 months (Research Question 2), the two study groups will be compared using Poisson regression (or zero-inflated negative binomial regression if the outcome variable consists of a large number of zeros). To evaluate the impact of the intervention on quality of life and self-management skills (Research Question 3; all are continuous variables), the baseline and each follow-up for the intervention and control group will be compared using linear mixed models. Mixed models have the advantage of utilizing all available data without discarding participants with missing follow-up measures. We will also evaluate whether the proportion of participants who show a clinically significant improvement on quality of life (improved scores by &gt;10 points) at 12 months is significantly different between the treatment and control group using simple logistic regressions. All analyses will follow the intention-to-treat principle, using two-tailed tests, and the level of significance set to 0.05.</p></li>
</ol>
</section>
</section>
<section id="references-and-further-readings" class="level1">
<h1>References and Further Readings</h1>
<p>Bland M, Butland BK, Peacock JL, Poloniecki J, Reid F, Sedgwick P. Statistics guide for research grant applicants. Department of Public Health Sciences, St.&nbsp;George’s Hospital Medical School; 2012. <a href="https://www-users.york.ac.uk/~mb55/guide/guide.htm" target="_blank">Link</a></p>
<p>Michelle S. NIH Grant Applications The Anatomy of a Specific Aims Page. BioScience Writers; 2015.<a href="https://www.biosciencewriters.com/NIH-Grant-Applications-The-Anatomy-of-a-Specific-Aims-Page.aspx" target="_blank">Link</a></p>
<p>National Institutes of Health. <a href="https://www.niaid.nih.gov/grants-contracts/write-research-plan" target="_blank">Link</a></p>
<p>Panter AT. Writing the data analysis plan. In How to Write a Successful Research Grant Application 2010 (pp.&nbsp;283-298). Springer, Boston, MA.</p>
<p>Robertson JD, Russell SW, Morrison DC. The grant application writer’s workbook, National Institutes of Health Version. Grant Writers’ Seminars and Workshops, LLC; 2019</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/kpuka\.ca");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 Copyright 2023, Klajdi Puka
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>